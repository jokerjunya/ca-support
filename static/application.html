<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¡ˆä»¶è©³ç´° - CA Support System</title>
    <style>
        body { font-family: 'Helvetica Neue', Arial, sans-serif; margin: 0; padding: 20px; background-color: #f5f5f5; }
        .container { max-width: 1000px; margin: 0 auto; }
        .breadcrumb { margin-bottom: 20px; color: #666; }
        .breadcrumb a { color: #667eea; text-decoration: none; }
        .header { background: white; padding: 25px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); margin-bottom: 20px; }
        .header h1 { margin: 0 0 10px 0; color: #333; }
        .header .status { padding: 8px 16px; border-radius: 20px; font-size: 0.9em; font-weight: bold; color: white; display: inline-block; }
        .status.reviewing { background-color: #ff9800; }
        .status.interviewing { background-color: #2196f3; }
        .status.offered { background-color: #4caf50; }
        .scores { margin-top: 15px; }
        .score { display: inline-block; margin-right: 20px; }
        .score-label { color: #666; font-size: 0.9em; }
        .score-value { font-weight: bold; color: #667eea; font-size: 1.1em; }
        .next-action { background: #f8f9fa; border-left: 4px solid #dc3545; padding: 20px; border-radius: 8px; margin-bottom: 20px; }
        .next-action h3 { margin: 0 0 10px 0; color: #dc3545; }
        .action-details { background: white; padding: 15px; border-radius: 8px; margin-top: 10px; }
        .action-meta { color: #666; font-size: 0.9em; margin-top: 10px; }
        .email-template { background: #f8f9fa; padding: 15px; border-radius: 8px; font-family: monospace; white-space: pre-wrap; margin-top: 10px; }
        .send-button { background: #667eea; color: white; padding: 10px 20px; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; }
        .send-button:hover { background: #5a6fd8; }
        .timeline { background: white; padding: 25px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .timeline h2 { margin-top: 0; color: #333; border-bottom: 2px solid #667eea; padding-bottom: 10px; }
        .timeline-item { padding: 15px 0; border-bottom: 1px solid #eee; }
        .timeline-item:last-child { border-bottom: none; }
        .timeline-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
        .timeline-time { color: #666; font-size: 0.9em; }
        .timeline-type { padding: 4px 8px; border-radius: 4px; font-size: 0.8em; font-weight: bold; margin-left: 10px; }
        .type-email-sent { background: #e3f2fd; color: #1976d2; }
        .type-email-received { background: #f3e5f5; color: #7b1fa2; }
        .type-interview { background: #e8f5e8; color: #388e3c; }
        .type-note { background: #fff3e0; color: #f57c00; }
        .timeline-content { color: #333; line-height: 1.5; }
        .demo-notice { background: #e8f4f8; border: 1px solid #b3e5fc; padding: 15px; border-radius: 8px; margin-bottom: 20px; }
        .demo-notice h3 { margin: 0 0 10px 0; color: #0277bd; }
        .demo-notice p { margin: 0; color: #0277bd; }
        .github-link { display: inline-block; background: #333; color: white; padding: 8px 16px; text-decoration: none; border-radius: 6px; margin-top: 10px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="breadcrumb">
            <a href="index.html">ğŸ“Š ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</a> / æ¡ˆä»¶è©³ç´°
        </div>
        
        <div class="demo-notice">
            <h3>ğŸš€ é™çš„ãƒ‡ãƒ¢ç‰ˆ</h3>
            <p>ã“ã®ç”»é¢ã¯é™çš„ã‚µã‚¤ãƒˆã®ãƒ‡ãƒ¢ã§ã™ã€‚å®Ÿéš›ã®ã‚·ã‚¹ãƒ†ãƒ ã§ã¯ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‡ãƒ¼ã‚¿ã¨LLMçµ±åˆãŒå‹•ä½œã—ã¾ã™ã€‚</p>
            <a href="https://github.com/jokerjunya/ca-support" class="github-link">ğŸ“‚ GitHub ãƒªãƒã‚¸ãƒˆãƒª</a>
        </div>
        
        <div class="header" id="applicationHeader">
            <!-- å‹•çš„ã«ç”Ÿæˆã•ã‚Œã¾ã™ -->
        </div>
        
        <div class="next-action" id="nextAction">
            <!-- å‹•çš„ã«ç”Ÿæˆã•ã‚Œã¾ã™ -->
        </div>
        
        <div class="timeline">
            <h2>ğŸ“œ å±¥æ­´ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³</h2>
            <div id="timeline">
                <!-- å‹•çš„ã«ç”Ÿæˆã•ã‚Œã¾ã™ -->
            </div>
        </div>
    </div>
    
    <script>
        // ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿
        const sampleApplications = {
            "app_001": {
                id: "app_001",
                candidate_name: "ç”°ä¸­å¤ªéƒ",
                company: "Acmeæ ªå¼ä¼šç¤¾",
                job_title: "ã‚·ãƒ‹ã‚¢ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢",
                status: "æ›¸é¡é¸è€ƒä¸­",
                enthusiasm_score: 0.8,
                concern_score: 0.3,
                latest_summary: "æŠ€è¡“åŠ›ã¯é«˜ã„ãŒã€è»¢è·ç†ç”±ã‚’è©³ã—ãèãå¿…è¦ãŒã‚ã‚‹ã€‚ç¾åœ¨ã®å¹´åãŒ700ä¸‡å††ã§ã€å¸Œæœ›ãŒ800ä¸‡å††ãªã®ã§æ¡ä»¶é¢ã¯å•é¡Œãªã—ã€‚"
            },
            "app_002": {
                id: "app_002",
                candidate_name: "ä½è—¤èŠ±å­",
                company: "Tech Corp",
                job_title: "ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼",
                status: "é¢æ¥èª¿æ•´ä¸­",
                enthusiasm_score: 0.9,
                concern_score: 0.2,
                latest_summary: "ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆçµŒé¨“è±Šå¯Œã§å³æˆ¦åŠ›ã¨ã—ã¦æœŸå¾…ã€‚å¹´åäº¤æ¸‰ãŒå¿…è¦ã ãŒã€ä¼æ¥­å´ã‚‚å‰å‘ãã€‚é¢æ¥æ—¥ç¨‹ã®èª¿æ•´ã‚’æ€¥ãã€‚"
            },
            "app_003": {
                id: "app_003",
                candidate_name: "éˆ´æœ¨ä¸€éƒ",
                company: "StartUp Inc",
                job_title: "ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢",
                status: "å†…å®š",
                enthusiasm_score: 0.7,
                concern_score: 0.6,
                latest_summary: "æŠ€è¡“çš„ã«ã¯ãƒãƒƒãƒã—ã¦ã„ã‚‹ãŒã€çµ¦ä¸é¢ã§æ‚©ã‚“ã§ã„ã‚‹æ§˜å­ã€‚ã‚¹ã‚¿ãƒ¼ãƒˆã‚¢ãƒƒãƒ—ã®å°†æ¥æ€§ã«ä¸å®‰ã‚’æ„Ÿã˜ã¦ã„ã‚‹ã€‚"
            }
        };
        
        const sampleNextActions = {
            "app_001": {
                id: "action_001",
                application_id: "app_001",
                action_type: "send_email",
                target_person: "CS",
                target_email: "cs@acme.com",
                subject: "é¢æ¥å€™è£œæ—¥ã®æç¤ºã«ã¤ã„ã¦ï¼ˆç”°ä¸­å¤ªéƒæ§˜ï¼‰",
                message_template: "ç”°ä¸­å¤ªéƒæ§˜ã®é¢æ¥å€™è£œæ—¥ã‚’ãŠé€ã‚Šã—ã¾ã™ã€‚ä»¥ä¸‹ã®æ—¥ç¨‹ã§ã”èª¿æ•´ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚\n\nå€™è£œæ—¥ï¼š\n- 2025å¹´7æœˆ8æ—¥ï¼ˆç«ï¼‰14:00-15:00\n- 2025å¹´7æœˆ9æ—¥ï¼ˆæ°´ï¼‰10:00-11:00\n- 2025å¹´7æœˆ10æ—¥ï¼ˆæœ¨ï¼‰15:00-16:00",
                priority: "high",
                due_date: "2025-07-05"
            },
            "app_003": {
                id: "action_002",
                application_id: "app_003",
                action_type: "send_email",
                target_person: "candidate",
                target_email: "suzuki@example.com",
                subject: "åŠ´åƒæ¡ä»¶ã«ã¤ã„ã¦ï¼ˆStartUp Incæ§˜ï¼‰",
                message_template: "éˆ´æœ¨æ§˜ã€ãŠç–²ã‚Œæ§˜ã§ã™ã€‚StartUp Incæ§˜ã®åŠ´åƒæ¡ä»¶ã«ã¤ã„ã¦è¿½åŠ ã§ã”ç›¸è«‡ãŒã‚ã‚Šã¾ã™ã€‚\n\nçµ¦ä¸é¢ã§ã®ã”æ‡¸å¿µã‚’ãŠèã‹ã›ãã ã•ã„ã€‚ç¾åœ¨ã®æ¡ä»¶ã¨å¸Œæœ›æ¡ä»¶ã®ã‚®ãƒ£ãƒƒãƒ—ã«ã¤ã„ã¦ã€å†åº¦ä¼æ¥­æ§˜ã¨äº¤æ¸‰ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚",
                priority: "high",
                due_date: "2025-07-04"
            }
        };
        
        const sampleMessageHistory = {
            "app_001": [
                {
                    timestamp: "2024-01-15 10:00",
                    message_type: "interview",
                    sender: "CA",
                    receiver: "ç”°ä¸­å¤ªéƒ",
                    subject: "é¢è«‡å®Ÿæ–½",
                    content: "ã€é¢è«‡è¨˜éŒ²ã€‘è»¢è·ç†ç”±ï¼šç¾åœ¨ã®è·å ´ã§ã®ã‚­ãƒ£ãƒªã‚¢ã‚¢ãƒƒãƒ—ãŒé›£ã—ãã€ã‚ˆã‚ŠæŠ€è¡“çš„ã«æŒ‘æˆ¦ã§ãã‚‹ç’°å¢ƒã‚’æ±‚ã‚ã¦ã„ã‚‹ã€‚å¹´åé¢ã§ã®ä¸æº€ã‚‚ã‚ã‚Šã€‚æŠ€è¡“ã‚¹ã‚­ãƒ«ã¯é«˜ãã€ç‰¹ã«Pythonã¨AWSã«ç²¾é€šã€‚äººæŸ„ã‚‚è‰¯å¥½ã§ã€é¢æ¥é€šéã®å¯èƒ½æ€§é«˜ã„ã€‚",
                    is_outbound: false
                },
                {
                    timestamp: "2024-01-12 16:45",
                    message_type: "email_received",
                    sender: "ç”°ä¸­å¤ªéƒ",
                    receiver: "CA",
                    subject: "Re: æ›¸é¡é¸è€ƒçµæœã«ã¤ã„ã¦",
                    content: "ã”é€£çµ¡ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚è»¢è·ç†ç”±ã«ã¤ã„ã¦è©³ã—ããŠè©±ã—ã•ã›ã¦ã„ãŸã ããŸã„ã§ã™ã€‚æ¥é€±ã§ã—ãŸã‚‰ã„ã¤ã§ã‚‚é¢è«‡å¯èƒ½ã§ã™ã€‚",
                    is_outbound: false
                },
                {
                    timestamp: "2024-01-10 14:30",
                    message_type: "email_sent",
                    sender: "CA",
                    receiver: "ç”°ä¸­å¤ªéƒ",
                    subject: "æ›¸é¡é¸è€ƒçµæœã«ã¤ã„ã¦",
                    content: "ç”°ä¸­æ§˜ã€æ›¸é¡é¸è€ƒã®çµæœã«ã¤ã„ã¦ãŠçŸ¥ã‚‰ã›ã—ã¾ã™ã€‚æŠ€è¡“åŠ›ã«ã¤ã„ã¦ã¯å•é¡Œã‚ã‚Šã¾ã›ã‚“ãŒã€è»¢è·ç†ç”±ã«ã¤ã„ã¦è©³ã—ããŠèã‹ã›ãã ã•ã„ã€‚é¢è«‡ã®æ©Ÿä¼šã‚’è¨­ã‘ã•ã›ã¦ã„ãŸã ã‘ã‚Œã°ã¨æ€ã„ã¾ã™ã€‚",
                    is_outbound: true
                },
                {
                    timestamp: "2024-01-08 09:00",
                    message_type: "note",
                    sender: "System",
                    receiver: "CA",
                    subject: "å¿œå‹Ÿå—ç†",
                    content: "ç”°ä¸­å¤ªéƒæ§˜ã‹ã‚‰Acmeæ ªå¼ä¼šç¤¾ã‚·ãƒ‹ã‚¢ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢è·ã¸ã®å¿œå‹Ÿã‚’å—ç†ã—ã¾ã—ãŸã€‚",
                    is_outbound: false
                }
            ]
        };
        
        // URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‹ã‚‰æ¡ˆä»¶IDã‚’å–å¾—
        function getApplicationId() {
            const params = new URLSearchParams(window.location.search);
            return params.get('id') || 'app_001';
        }
        
        // ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’ç”Ÿæˆ
        function generateApplicationHeader(app) {
            const statusClass = app.status.includes('æ›¸é¡') ? 'reviewing' : 
                               app.status.includes('é¢æ¥') ? 'interviewing' : 'offered';
            
            return `
                <h1>ğŸ‘¤ ${app.candidate_name} â†’ ğŸ¢ ${app.company}</h1>
                <div>
                    <span class="status ${statusClass}">${app.status}</span>
                    <span style="margin-left: 15px; color: #666;">${app.job_title}</span>
                </div>
                <div class="scores">
                    <div class="score">
                        <div class="score-label">ç†±æ„ã‚¹ã‚³ã‚¢</div>
                        <div class="score-value">${Math.round(app.enthusiasm_score * 100)}%</div>
                    </div>
                    <div class="score">
                        <div class="score-label">æ‡¸å¿µã‚¹ã‚³ã‚¢</div>
                        <div class="score-value">${Math.round(app.concern_score * 100)}%</div>
                    </div>
                </div>
                <div style="margin-top: 15px; color: #666; line-height: 1.5;">
                    ${app.latest_summary}
                </div>
            `;
        }
        
        // ãƒã‚¯ã‚¹ãƒˆã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç”Ÿæˆ
        function generateNextAction(nextAction) {
            if (!nextAction) return '';
            
            return `
                <h3>ğŸ”´ ãƒã‚¯ã‚¹ãƒˆã‚¢ã‚¯ã‚·ãƒ§ãƒ³</h3>
                <div class="action-details">
                    <strong>${nextAction.target_person}ã¸ã®ãƒ¡ãƒ¼ãƒ«é€ä¿¡</strong>
                    <div class="action-meta">
                        å®›å…ˆ: ${nextAction.target_email} | æœŸé™: ${nextAction.due_date} | å„ªå…ˆåº¦: ${nextAction.priority.toUpperCase()}
                    </div>
                    <div style="margin-top: 10px;">
                        <strong>ä»¶å:</strong> ${nextAction.subject}
                    </div>
                    <div class="email-template">${nextAction.message_template}</div>
                    <div style="margin-top: 15px;">
                        <button class="send-button" onclick="alert('ãƒ¡ãƒ¼ãƒ«é€ä¿¡æ©Ÿèƒ½ã¯é–‹ç™ºä¸­ã§ã™ï¼ˆå°†æ¥LLMçµ±åˆäºˆå®šï¼‰')">
                            ğŸ“§ ãƒ¡ãƒ¼ãƒ«ã‚’é€ä¿¡
                        </button>
                        <button class="send-button" style="background: #6c757d; margin-left: 10px;" onclick="alert('AIæ–‡é¢ç”Ÿæˆã¯é–‹ç™ºä¸­ã§ã™')">
                            ğŸ¤– AIæ–‡é¢ç”Ÿæˆ
                        </button>
                    </div>
                </div>
            `;
        }
        
        // ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã‚’ç”Ÿæˆ
        function generateTimeline(messages) {
            if (!messages || messages.length === 0) {
                return '<p>å±¥æ­´ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>';
            }
            
            return messages.map(msg => {
                const typeClass = `type-${msg.message_type.replace('_', '-')}`;
                const icon = {
                    "email_sent": "ğŸ“§",
                    "email_received": "ğŸ“¨", 
                    "interview": "ğŸ’¬",
                    "note": "ğŸ“"
                }[msg.message_type] || "ğŸ“„";
                
                return `
                    <div class="timeline-item">
                        <div class="timeline-header">
                            <span class="timeline-time">${msg.timestamp}</span>
                            <span class="timeline-type ${typeClass}">${icon} ${msg.message_type.replace('_', ' ')}</span>
                        </div>
                        <div style="font-weight: bold; margin-bottom: 5px;">
                            ${msg.subject}
                        </div>
                        <div style="font-size: 0.9em; color: #666; margin-bottom: 8px;">
                            ${msg.sender} â†’ ${msg.receiver}
                        </div>
                        <div class="timeline-content">
                            ${msg.content}
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã®å‡¦ç†
        document.addEventListener('DOMContentLoaded', function() {
            const appId = getApplicationId();
            const app = sampleApplications[appId];
            
            if (!app) {
                document.getElementById('applicationHeader').innerHTML = '<p>æ¡ˆä»¶ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚</p>';
                return;
            }
            
            // ãƒ˜ãƒƒãƒ€ãƒ¼ç”Ÿæˆ
            document.getElementById('applicationHeader').innerHTML = generateApplicationHeader(app);
            
            // ãƒã‚¯ã‚¹ãƒˆã‚¢ã‚¯ã‚·ãƒ§ãƒ³ç”Ÿæˆ
            const nextAction = sampleNextActions[appId];
            if (nextAction) {
                document.getElementById('nextAction').innerHTML = generateNextAction(nextAction);
            } else {
                document.getElementById('nextAction').style.display = 'none';
            }
            
            // ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ç”Ÿæˆ
            const messages = sampleMessageHistory[appId] || [];
            document.getElementById('timeline').innerHTML = generateTimeline(messages);
            
            // ãƒšãƒ¼ã‚¸ã‚¿ã‚¤ãƒˆãƒ«æ›´æ–°
            document.title = `æ¡ˆä»¶è©³ç´° - ${app.candidate_name} Ã— ${app.company}`;
        });
    </script>
</body>
</html> 